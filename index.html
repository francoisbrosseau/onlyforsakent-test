<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ONLYFORSAKEN</title>

  <!-- ‚úÖ Keep your existing fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Cinzel:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --text: rgba(255,255,255,0.90);
      --muted: rgba(255,255,255,0.45);
      --faint: rgba(255,255,255,0.18);
      --glow: rgba(255,255,255,0.95);
      --shadow: rgba(0,0,0,0.55);

      /* ‚úÖ Subtle per-letter hint colors (dim by default) */
      --hint-o: rgba(120, 255, 170, 0.28);
      --hint-p: rgba(120, 190, 255, 0.28);
      --hint-e: rgba(255, 120, 140, 0.28);
      --hint-n: rgba(200, 160, 255, 0.28);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; background:#000; font-family: Georgia, "Times New Roman", serif; }

    /* HERO BACKGROUND (unchanged, image stays fixed) */
    .hero{
      min-height: 100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;

      background-image: url("forsaken.jpg");
      background-size: cover;
      background-position: center 20%;
      background-repeat: no-repeat;
    }

    .hero::before{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at center, rgba(0,0,0,0.35), rgba(0,0,0,0.75));
    }

    .wrap{
      position:relative;
      width:min(720px, 92vw);
      padding: 36px 22px;
      text-align:center;
      filter: drop-shadow(0 12px 18px var(--shadow));
    }

    .brand{
      font-family: "Cinzel Decorative", "Cinzel", Georgia, "Times New Roman", serif;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      font-size: clamp(30px, 4.4vw, 54px);
      color: rgba(255,255,255,0.92);
      margin: 0 0 10px 0;
      user-select:none;
      text-shadow:
        0 0 14px rgba(255,255,255,0.12),
        0 10px 30px rgba(0,0,0,0.65);
    }

    /* ‚úÖ REPLACED COPY (cryptic, not obvious) */
    .sub{
      margin: 0 0 26px 0;
      color: rgba(255,255,255,0.52);
      letter-spacing: 0.12em;
      text-transform: lowercase;
      font-size: 13px;
      user-select:none;
      font-family: "Cinzel", Georgia, "Times New Roman", serif;
    }

    /* RIDDLE LINE (same mechanism, just more ‚Äúritual plaque‚Äù vibe) */
    .riddle{
      margin: 0 auto 18px;
      display:inline-flex;
      gap: 14px;
      padding: 10px 16px;
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 999px;
      backdrop-filter: blur(6px);
      background: rgba(0,0,0,0.18);
      user-select:none;
    }

    .riddle .hint{
      color: rgba(255,255,255,0.20);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-size: 10px;
      margin-right: 10px;
      display:flex;
      align-items:center;
      font-family: "Cinzel", Georgia, "Times New Roman", serif;
    }

    .riddle .letters{
      display:inline-flex;
      gap: 10px;
      align-items:center;
    }

    .riddle .ch{
      font-size: 16px;
      letter-spacing: 0.12em;
      color: var(--faint);
      text-shadow: 0 0 0 rgba(255,255,255,0);
      transition: opacity 220ms ease, color 220ms ease, text-shadow 220ms ease, transform 220ms ease, filter 220ms ease;
      opacity: 0.10;
    }

    .riddle .ch.hint{
      opacity: 0.18;
      color: rgba(255,255,255,0.22);
      filter: drop-shadow(0 0 10px rgba(255,255,255,0.00));
    }
    .riddle .ch.hint[data-hint="o"]{ color: var(--hint-o); }
    .riddle .ch.hint[data-hint="p"]{ color: var(--hint-p); }
    .riddle .ch.hint[data-hint="e"]{ color: var(--hint-e); }
    .riddle .ch.hint[data-hint="n"]{ color: var(--hint-n); }

    .riddle .ch.on{
      opacity: 1;
      color: var(--glow);
      text-shadow: 0 0 16px rgba(255,255,255,0.22);
      transform: translateY(-1px);
    }

    .riddle .ch.hint.on{
      color: rgba(255,255,255,0.88);
      text-shadow: 0 0 18px rgba(255,255,255,0.10);
      transform: translateY(-1px);
    }
    .riddle .ch.hint.on[data-hint="o"]{
      color: rgba(180, 255, 210, 0.92);
      text-shadow: 0 0 18px rgba(120, 255, 170, 0.18);
    }
    .riddle .ch.hint.on[data-hint="p"]{
      color: rgba(190, 225, 255, 0.92);
      text-shadow: 0 0 18px rgba(120, 190, 255, 0.18);
    }
    .riddle .ch.hint.on[data-hint="e"]{
      color: rgba(255, 200, 205, 0.92);
      text-shadow: 0 0 18px rgba(255, 120, 140, 0.18);
    }
    .riddle .ch.hint.on[data-hint="n"]{
      color: rgba(235, 215, 255, 0.92);
      text-shadow: 0 0 18px rgba(200, 160, 255, 0.18);
    }

    /* =========================
       üóù SAME ‚ÄúUNSEAL‚Äù ALTAR GATE AS LEVEL 4/5
    ========================== */
    .gateWrap{
      width: min(560px, 92vw);
      margin: 16px auto 0;
      padding: 18px 16px 18px;
      border-radius: 22px;
      background:
        radial-gradient(circle at 18% 18%, rgba(255,255,255,0.06), transparent 55%),
        radial-gradient(circle at 82% 38%, rgba(160,60,40,0.10), transparent 62%),
        linear-gradient(to bottom, rgba(0,0,0,0.28), rgba(0,0,0,0.10));
      border: 1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(7px);
      box-shadow:
        0 22px 44px rgba(0,0,0,0.46),
        inset 0 1px 0 rgba(255,255,255,0.06);
      position: relative;
      overflow:hidden;
    }

    .gateWrap::after{
      content:"";
      position:absolute;
      left: 18px; right: 18px;
      top: 46px;
      height: 1px;
      background: linear-gradient(90deg,
        transparent,
        rgba(232,210,170,0.14),
        rgba(255,255,255,0.06),
        rgba(232,210,170,0.12),
        transparent
      );
      opacity: 0.85;
      pointer-events:none;
    }

    .gateLabel{
      font-family: "Cinzel Decorative", serif;
      letter-spacing: 0.24em;
      text-transform: uppercase;
      font-size: 10px;
      color: rgba(255,255,255,0.42);
      margin: 0 0 14px;
      user-select:none;
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      text-shadow: 0 0 18px rgba(0,0,0,0.55);
    }

    .gateLabel .mark{
      color: rgba(232, 210, 170, 0.52);
      text-shadow: 0 0 16px rgba(160,60,40,0.20);
      font-size: 12px;
    }

    .gate{
      display:flex;
      gap: 12px;
      justify-content:center;
      align-items:center;
      flex-wrap:wrap;
      position: relative;
    }

    input[type="password"]{
      width: min(340px, 86vw);
      padding: 13px 16px;
      border-radius: 16px;
      background:
        radial-gradient(circle at 30% 28%, rgba(240,225,190,0.10), transparent 55%),
        radial-gradient(circle at 70% 70%, rgba(140,60,40,0.08), transparent 60%),
        linear-gradient(to bottom, rgba(18,14,12,0.68), rgba(8,7,7,0.78));
      border: 1px solid rgba(255,255,255,0.16);
      color: rgba(245,236,216,0.92);
      outline: none;
      letter-spacing: 0.16em;
      font-size: 14px;
      font-family: "Cormorant Garamond", serif;
      box-shadow:
        inset 0 0 0 1px rgba(0,0,0,0.55),
        inset 0 0 26px rgba(0,0,0,0.45);
      transition: border-color 220ms ease, box-shadow 220ms ease, transform 220ms ease;
      -webkit-text-security: disc;
    }

    input[type="password"]::placeholder{
      color: rgba(232,210,170,0.35);
      letter-spacing: 0.10em;
    }

    input[type="password"]:focus{
      border-color: rgba(232, 210, 170, 0.30);
      box-shadow:
        0 0 0 3px rgba(232, 210, 170, 0.06),
        0 0 28px rgba(160,60,40,0.12),
        inset 0 0 0 1px rgba(0,0,0,0.55),
        inset 0 0 28px rgba(0,0,0,0.50);
      transform: translateY(-1px);
    }

    button{
      padding: 13px 18px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.16);
      cursor:pointer;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,0.10), transparent 55%),
        linear-gradient(to bottom, rgba(255,255,255,0.08), rgba(0,0,0,0.18));
      color: rgba(245,236,216,0.92);
      letter-spacing: 0.16em;
      text-transform: uppercase;
      font-family: "Cormorant Garamond", serif;
      box-shadow:
        0 14px 26px rgba(0,0,0,0.35),
        inset 0 1px 0 rgba(255,255,255,0.08);
      transition: transform 180ms ease, border-color 220ms ease, box-shadow 220ms ease, filter 220ms ease;
      position: relative;
      overflow:hidden;
    }

    button::after{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(circle at 50% 20%, rgba(232,210,170,0.14), transparent 55%);
      opacity: 0;
      transition: opacity 220ms ease;
      pointer-events:none;
    }

    button:hover{
      border-color: rgba(232, 210, 170, 0.24);
      box-shadow:
        0 18px 34px rgba(0,0,0,0.42),
        0 0 22px rgba(160,60,40,0.10),
        inset 0 1px 0 rgba(255,255,255,0.08);
      transform: translateY(-1px);
      filter: brightness(1.04);
    }
    button:hover::after{ opacity: 1; }
    button:active{ transform: translateY(0px); }

    .msg{
      margin-top: 14px;
      min-height: 18px;
      color: rgba(255,255,255,0.55);
      letter-spacing: 0.10em;
      font-size: 12px;
      font-family: "Cinzel", Georgia, "Times New Roman", serif;
      user-select:none;
    }

    .wrong{ animation: shake 340ms ease; }
    @keyframes shake{
      0%{ transform: translateX(0); }
      20%{ transform: translateX(-6px); }
      40%{ transform: translateX(6px); }
      60%{ transform: translateX(-4px); }
      80%{ transform: translateX(4px); }
      100%{ transform: translateX(0); }
    }

    .fadeOut{ animation: fade 650ms ease forwards; }
    @keyframes fade{ to{ opacity:0; transform: translateY(6px); } }

    /* ‚úÖ Standard single mute button (same vibe as levels) */
    #muteBtn{
      position: fixed;
      top: 18px;
      right: 18px;
      z-index: 2147483647;
      pointer-events:auto;
      cursor:pointer;
      background: rgba(0,0,0,.45);
      border: 1px solid rgba(255,255,255,.28);
      color: rgba(255,255,255,.95);
      padding: 10px 12px;
      border-radius: 999px;
      font-family:'Cormorant Garamond',serif;
      backdrop-filter: blur(6px);
      -webkit-tap-highlight-color: transparent;
      user-select:none;
    }

    @media (min-width: 1200px){
      .hero{ background-position: center 10%; }
    }
  </style>
</head>

<body>
  <main class="hero">
    <section class="wrap" id="wrap">
      <h1 class="brand">ONLYFORSAKEN</h1>

      <!-- ‚úÖ More cryptic, less ‚Äúobvious password prompt‚Äù -->
      <p class="sub">
        the gate does not ask for a word‚Äî<br>
        it asks what you are willing to admit.
      </p>

      <div class="riddle" aria-label="riddle">
        <div class="hint">observe the pulse</div>

        <div class="letters" id="letters">
          <span class="ch hint" data-real="1" data-hint="o">O</span>
          <span class="ch" data-real="0">X</span>
          <span class="ch hint" data-real="1" data-hint="p">P</span>
          <span class="ch" data-real="0">M</span>
          <span class="ch" data-real="0">L</span>
          <span class="ch hint" data-real="1" data-hint="e">E</span>
          <span class="ch" data-real="0">R</span>
          <span class="ch hint" data-real="1" data-hint="n">N</span>
          <span class="ch" data-real="0">A</span>
        </div>
      </div>

      <!-- ‚úÖ SAME gate as Level 4/5 -->
      <div class="gateWrap">
        <div class="gateLabel"><span class="mark">‚ü°</span> Offer your answer <span class="mark">‚ü°</span></div>
        <div class="gate" id="gate">
          <input id="pw" type="password" placeholder="whisper it‚Ä¶" autocomplete="off" />
          <button id="btn">UNSEAL</button>
        </div>
      </div>

      <div class="msg" id="msg"></div>
    </section>
  </main>

  <!-- ‚úÖ Standard mute/unmute -->
  <button id="muteBtn" aria-label="Toggle audio">üîä</button>

  <!-- üå´ Index ambience -->
  <audio id="indexAmbience" loop preload="auto" playsinline>
    <source src="audio/index-ambience.mp3" type="audio/mpeg">
  </audio>

  <script>
    // ‚úÖ Your real password (UNCHANGED)
    const PASSWORD = "OPEN";

    // Letter glow loop (keep the same mechanic, just slightly calmer)
    const letters = Array.from(document.querySelectorAll("#letters .ch"));
    const real = letters.filter(el => el.dataset.real === "1");
    const decoy = letters.filter(el => el.dataset.real !== "1");

    function pickLetter(){
      const pool = (Math.random() < 0.80) ? real : decoy;
      return pool[Math.floor(Math.random() * pool.length)];
    }

    function flash(){
      letters.forEach(el => el.classList.remove("on"));
      const chosen = pickLetter();
      chosen.classList.add("on");
      const flashMs = 320 + Math.floor(Math.random() * 240); // 320‚Äì560ms (slower, moodier)
      setTimeout(() => chosen.classList.remove("on"), flashMs);
    }

    function loop(){
      flash();
      const nextMs = 860 + Math.floor(Math.random() * 820); // 860‚Äì1680ms (less ‚Äúarcade‚Äù)
      setTimeout(loop, nextMs);
    }
    loop();

    // Gate
    const wrap = document.getElementById("wrap");
    const pw = document.getElementById("pw");
    const btn = document.getElementById("btn");
    const msg = document.getElementById("msg");

    function check() {
      const val = (pw.value || "").trim().toUpperCase();
      if (!val) return;

      if (val === PASSWORD) {
        msg.textContent = "‚Ä¶";
        wrap.classList.add("fadeOut");
        setTimeout(() => { window.location.href = "entry.html"; }, 650);
      } else {
        msg.textContent = "Not yet.";
        wrap.classList.remove("wrong");
        void wrap.offsetWidth;
        wrap.classList.add("wrong");
        pw.select();
      }
    }

    btn.addEventListener("click", check);
    pw.addEventListener("keydown", (e) => { if (e.key === "Enter") check(); });

    // ‚úÖ Index ambience using the SAME mute key as the rest of the site
    (() => {
      const muteBtn = document.getElementById("muteBtn");
      const amb = document.getElementById("indexAmbience");
      if (!muteBtn || !amb) return;

      const AMB_TARGET = 0.40; // vibe-level; you can tweak

      const savedMuted = localStorage.getItem("ofs_mute") === "1";
      amb.muted = savedMuted;
      muteBtn.textContent = savedMuted ? "üîá" : "üîä";
      amb.volume = AMB_TARGET;

      async function playAmb(){
        try{
          amb.currentTime = 0;
          const p = amb.play();
          if (p && p.catch) p.catch(()=>{});
        }catch(e){}
      }

      function stopAmb(){
        try{ amb.pause(); }catch(e){}
      }

      muteBtn.addEventListener("click", (e) => {
        e.preventDefault();
        e.stopPropagation();

        const newMuted = !amb.muted;
        amb.muted = newMuted;

        localStorage.setItem("ofs_mute", newMuted ? "1" : "0");
        muteBtn.textContent = newMuted ? "üîá" : "üîä";

        if (!newMuted) playAmb();
        else stopAmb();
      }, true);

      window.addEventListener("pageshow", () => {
        if (!amb.muted) playAmb();
      });

      window.addEventListener("pointerdown", () => {
        if (!amb.muted && amb.paused) playAmb();
      }, { once:true });
    })();
  </script>
</body>
</html>
